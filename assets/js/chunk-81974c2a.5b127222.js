(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81974c2a"],{"0d2a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"center-view-container"},[a("div",{staticClass:"center-view-header"},[a("h1",{staticClass:"center-view-title"},[e._v("我创建的任务")]),a("div",{staticClass:"tool-container"},[a("div",{staticClass:"search-container"},[a("el-input",{staticClass:"input-searcher",attrs:{"prefix-icon":"el-icon-edit-outline",clearable:"",placeholder:"任务名称（部分）"},on:{clear:e.handleSearch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),a("el-date-picker",{staticClass:"date-searcher",attrs:{type:"datetimerange",clearable:!1,"start-placeholder":"开始时间","end-placeholder":"结束时间"},on:{change:e.handleSearch},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}}),a("el-select",{staticClass:"status-searcher",attrs:{placeholder:"按状态筛选",clearable:""},on:{change:e.handleSearch},model:{value:e.searchStatus,callback:function(t){e.searchStatus=t},expression:"searchStatus"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"tool-button-container"},[a("div",{staticClass:"long"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",disabled:e.noMsg||e.loading},on:{click:e.handleSearch}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",disabled:e.loading},on:{click:e.handleRefresh}})],1),a("div",{staticClass:"short"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",disabled:e.noMsg||e.loading},on:{click:e.handleSearch}},[e._v("查找任务")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",disabled:e.loading},on:{click:e.handleRefresh}},[e._v("刷新所有")])],1)])])]),a("div",{staticClass:"center-view-body"},[a("my-task-list",{ref:"overallTaskList",attrs:{"name-str":e.searchName,"start-date":e.searchTime[0],"end-date":e.searchTime[1],status:e.searchStatus}})],1)])},r=[],s=(a("96cf"),a("1da1")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-writ-or-task-table",attrs:{data:e.tasks,height:"60%",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"任务id","min-width":"70",align:"center",fixed:""}}),a("el-table-column",{attrs:{prop:"title",label:"任务名称","min-width":"145"}}),a("el-table-column",{attrs:{label:"上传时间","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.time.toLocaleString()))]}}])}),a("el-table-column",{attrs:{prop:"length",label:"任务数量","min-width":"80"}}),a("el-table-column",{attrs:{label:"任务状态","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["waiting"===n.status?a("div",[a("el-tag",{attrs:{type:"info"}},[a("i",{staticClass:"el-icon-folder-opened"}),a("span",[e._v(e._s(e.statusTable[n.status]))])])],1):e._e(),"ongoing"===n.status?a("div",[a("el-tag",{attrs:{type:"info"}},[a("i",{staticClass:"el-icon-loading"}),a("span",[e._v(e._s(e.statusTable[n.status]))])])],1):e._e(),"finished"===n.status?a("div",[a("el-tag",{attrs:{type:"success"}},[a("i",{staticClass:"el-icon-success"}),a("span",[e._v(e._s(e.statusTable[n.status]))])])],1):e._e(),"failed"===n.status?a("div",[a("el-tag",{attrs:{type:"danger"}},[a("i",{staticClass:"el-icon-error"}),a("span",[e._v(e._s(e.statusTable[n.status]))])])],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"80",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.$index;return["waiting"===n.status||"ongoing"===n.status?a("div",[a("el-button",{staticClass:"my-button",attrs:{icon:"el-icon-sort",loading:n.fetching},on:{click:function(t){return e.updateStatus(n.id,r)}}},[e._v("更新状态")])],1):e._e(),"finished"===n.status?a("div",[a("el-button",{staticClass:"my-button",attrs:{icon:"el-icon-view",type:"success"},on:{click:function(t){return e.checkTaskResult(n.id)}}},[e._v("查看结果")])],1):e._e(),"failed"===n.status?a("div",[a("el-button",{staticClass:"my-button",attrs:{icon:"el-icon-document-delete",disabled:""}},[e._v("检测失败")])],1):e._e()]}}])})],1),a("el-pagination",{staticClass:"my-pagination",attrs:{disabled:e.loading,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleChangePage,"size-change":e.loadTasks,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)},c=[],o=(a("99af"),a("4160"),a("159b"),a("d0bb")),l=[30,50,100],u={name:"MyTaskList",props:{preLoad:{type:Boolean,default:!0},nameStr:{type:String,default:null},startDate:{type:Date,default:null},endDate:{type:Date,default:null},status:{type:String,default:null}},beforeMount:function(){this.preLoad&&this.loadTasks()},data:function(){return{statusTable:o["b"],loading:!1,tasks:[],currentPage:1,pageSizes:l,pageSize:l[0],total:0}},methods:{updateStatus:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.tasks[t].fetching=!0,n.next=3,a.$api.getTaskStatus(e);case 3:r=n.sent,r&&(a.$message.info({message:"".concat(e,'号任务状态为"').concat(a.statusTable[r],'"'),duration:1500}),a.tasks[t].status=r),a.tasks[t].fetching=!1;case 6:case"end":return n.stop()}}),n)})))()},handleLoad:function(e,t,a,n,r,i){var c=this;return Object(s["a"])(regeneratorRuntime.mark((function s(){var o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return c.loading=!0,s.next=3,c.$api.getTasks({nameStr:e,startDate:t,endDate:a,pageIndex:n,pageSize:r,status:i});case 3:return o=s.sent,o&&o.result&&(o.result.forEach((function(e){e.fetching=!1,e.time=new Date(e.time)})),c.tasks=o.result,c.total=o.total||0),s.next=7,c.$nextTick();case 7:c.loading=!1;case 8:case"end":return s.stop()}}),s)})))()},loadTasks:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading){t.next=7;break}return e.loading=!0,e.currentPage=1,t.next=5,e.handleLoad(e.nameStr,e.startDate,e.endDate,e.currentPage,e.pageSize,e.status);case 5:t.next=8;break;case 7:e.$message.warning("请在加载结束后再检索");case 8:case"end":return t.stop()}}),t)})))()},handleChangePage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading){t.next=3;break}return t.next=3,e.handleLoad(e.nameStr,e.startDate,e.endDate,e.currentPage,e.pageSize,e.status);case 3:case"end":return t.stop()}}),t)})))()},refreshTasks:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading){t.next=8;break}return e.loading=!0,e.currentPage=1,e.pageSize=l[0],t.next=6,e.handleLoad();case 6:t.next=9;break;case 8:e.$message.warning("请在加载结束后再刷新");case 9:case"end":return t.stop()}}),t)})))()},checkTaskResult:function(e){this.$router.push("/resources/task-report/".concat(e))}}},d=u,h=a("2877"),f=Object(h["a"])(d,i,c,!1,null,null,null),g=f.exports,p={name:"TaskOverall",components:{MyTaskList:g},computed:{noMsg:function(){return!(this.searchName||this.searchTime&&this.searchTime.length>0||this.searchStatus)}},data:function(){return{searchName:"",searchTime:[],options:o["a"],searchStatus:null,loading:!1}},methods:{handleSearch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:return e.loading=!0,t.next=5,e.$refs["overallTaskList"].loadTasks();case 5:e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleRefresh:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.searchName="",e.searchTime=[],e.status=null,t.next=5,e.$nextTick();case 5:return e.loading=!0,t.next=8,e.$refs["overallTaskList"].refreshTasks();case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()}}},b=p,m=(a("f7c0"),Object(h["a"])(b,n,r,!1,null,"1f1203f8",null));t["default"]=m.exports},"159b":function(e,t,a){var n=a("da84"),r=a("fdbc"),s=a("17c2"),i=a("9112");for(var c in r){var o=n[c],l=o&&o.prototype;if(l&&l.forEach!==s)try{i(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(e,t,a){"use strict";var n=a("b727").forEach,r=a("a640"),s=a("ae40"),i=r("forEach"),c=s("forEach");e.exports=i&&c?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"99af":function(e,t,a){"use strict";var n=a("23e7"),r=a("d039"),s=a("e8b5"),i=a("861d"),c=a("7b0b"),o=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),h=a("b622"),f=a("2d00"),g=h("isConcatSpreadable"),p=9007199254740991,b="Maximum allowed index exceeded",m=f>=51||!r((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),v=d("concat"),k=function(e){if(!i(e))return!1;var t=e[g];return void 0!==t?!!t:s(e)},w=!m||!v;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,a,n,r,s,i=c(this),d=u(i,0),h=0;for(t=-1,n=arguments.length;t<n;t++)if(s=-1===t?i:arguments[t],k(s)){if(r=o(s.length),h+r>p)throw TypeError(b);for(a=0;a<r;a++,h++)a in s&&l(d,h,s[a])}else{if(h>=p)throw TypeError(b);l(d,h++,s)}return d.length=h,d}})},aa9d:function(e,t,a){},b64b:function(e,t,a){var n=a("23e7"),r=a("7b0b"),s=a("df75"),i=a("d039"),c=i((function(){s(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return s(r(e))}})},d0bb:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return c}));a("4160"),a("b64b"),a("159b");var n={untested:"尚未检测",waiting:"等待检测",ongoing:"在检测中",finished:"检测完成",wrong:"解析错误",accident:"意外中断"},r={waiting:"等待检测",ongoing:"在检测中",finished:"检测完成",failed:"检测失败"},s=function(e,t,a){var n=[];return Object.keys(e).forEach((function(r){var s={},i=e[r];s[t]=r,s[a]=i,n.push(s)})),n},i=s(n,"value","label"),c=s(r,"value","label")},f7c0:function(e,t,a){"use strict";var n=a("aa9d"),r=a.n(n);r.a}}]);